<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>Inicio - Achisway</title>
</head>
<body>

<main layout:fragment="content">
            <!-- Main Content -->
            <div class="px-40 flex flex-1 justify-center py-5">
                <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
                    <!-- Hero Section -->
                    <div class="@container">
                        <div class="@[480px]:p-4">
                            <div class="flex min-h-[480px] flex-col gap-6 bg-cover bg-center bg-no-repeat @[480px]:gap-8 @[480px]:rounded-lg items-center justify-center p-4"
                                 style='background-image: linear-gradient(rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.4) 100%), url("https://lh3.googleusercontent.com/aida-public/AB6AXuAiWrvG6xIpArstDUJaqoeB_KC-ngN-jwtFJAQ-6yhOEiqd2FP1JU0sg0wRMvr_jvlcVobdGA0eHzID4Xs9EFiKDKvCWTrRTFWZTfXaqshe1A1FmEodUPbAlXYS_ZRpkjZW0tQp1y2qxenbnhw1NHhON5fT2-bz7glAp2trT62Ah0AMIG2nLnpb1qiZYCvGCF21AROt4Q56VbPesP1GyYuYkC5-yYdzewouPLSs9LfIz9_V95DYqutcvwDrb_pp-Naj65Y9T9X-ifk0");'>
                                <div class="flex flex-col gap-2 text-center">
                                    <h1 class="text-white text-4xl font-black leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em]">
                                        Descubre la riqueza de los Andes
                                    </h1>
                                    <h2 class="text-white text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal">
                                        Productos autóctonos de productores y cooperativas peruanas
                                    </h2>
                                </div>
                                <div class="flex-wrap gap-3 flex justify-center">
                                    <a th:href="@{/catalogo}"
                                       class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-[#f98006] text-[#1c140d] text-sm font-bold leading-normal tracking-[0.015em] @[480px]:text-base @[480px]:font-bold @[480px]:leading-normal @[480px]:tracking-[0.015em] hover:bg-[#e07305]">
                                        <span class="truncate">Ver catálogo</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Productos Destacados -->
                    <h2 class="text-[#1c140d] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Destacados</h2>
                    <div class="p-4">
                        <div class="flex items-center justify-between gap-3 pb-3">
                            <button type="button" id="destacadosPrev"
                                    class="flex min-w-[44px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f4ede6] text-[#1c140d] text-sm font-bold leading-normal tracking-[0.015em] hover:bg-[#e9dbce]"
                                    aria-label="Ver productos anteriores">
                                <span class="truncate">‹</span>
                            </button>

                            <button type="button" id="destacadosNext"
                                    class="flex min-w-[44px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f4ede6] text-[#1c140d] text-sm font-bold leading-normal tracking-[0.015em] hover:bg-[#e9dbce]"
                                    aria-label="Ver más productos">
                                <span class="truncate">›</span>
                            </button>
                        </div>

                        <div id="destacadosViewport" class="overflow-hidden">
                            <div id="destacadosTrack" class="flex gap-3">
                                <a th:each="p : ${productosDestacados}"
                                   th:href="@{/producto/{slug}(slug=${p.slug})}"
                                   class="flex flex-col gap-3 pb-3 w-[180px] shrink-0">
                                    <img class="w-full aspect-square object-cover rounded-lg bg-[#f4ede6]"
                                         th:src="@{${(p.imagen != null and !#strings.isEmpty(p.imagen)) ? '/files/' + p.imagen : '/files/defaults/producto-default.svg'}}"
                                         onerror="this.onerror=null; this.src='/files/defaults/producto-default.svg';"
                                         th:alt="${p.titulo}" />
                                    <div>
                                        <p class="text-[#1c140d] text-base font-medium leading-normal" th:text="${p.titulo}">Producto</p>
                                        <p class="text-[#9e7347] text-sm font-normal leading-normal" th:text="${p.resumen}"></p>
                                        <p class="text-[#9e7347] text-sm font-normal leading-normal" th:text="'S/ ' + ${p.precio}">S/ 0.00</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Novedades -->
                    <h2 class="text-[#1c140d] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Novedades</h2>
                    <div class="flex overflow-y-auto [-ms-scrollbar-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden">
                        <div class="flex items-stretch p-4 gap-3">
                            <div th:each="pagina : ${paginasTop}"  class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-60">
                                <div class="w-full bg-center bg-no-repeat aspect-video bg-cover rounded-lg flex flex-col"
                                     th:style="'background-image: url(/files/' + @{${pagina.paginaImagenes[0].ruta}} + ');'"></div>
                                <a th:href="'pagina/' + @{${pagina.url}}">
                                    <p class="text-[#1c140d] text-base font-medium leading-normal" th:text="${pagina.titulo}"></p>
                                    <p class="text-[#9e7347] text-sm font-normal leading-normal" th:text="${pagina.resumen}"></p>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Beneficios -->
                    <div class="flex flex-col gap-10 px-4 py-10 @container">
                        <h1 class="text-[#1c140d] tracking-light text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em] max-w-[720px]">
                            Beneficios de comprar en Achisway
                        </h1>
                        <div class="grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-0">
                            <div class="flex flex-1 gap-3 rounded-lg border border-[#e9dbce] bg-[#fcfaf8] p-4 flex-col">
                                <div class="text-[#1c140d]">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                        <path d="M247.42,117l-14-35A15.93,15.93,0,0,0,218.58,72H184V64a8,8,0,0,0-8-8H24A16,16,0,0,0,8,72V184a16,16,0,0,0,16,16H41a32,32,0,0,0,62,0h50a32,32,0,0,0,62,0h17a16,16,0,0,0,16-16V120A7.94,7.94,0,0,0,247.42,117ZM184,88h34.58l9.6,24H184ZM24,72H168v64H24ZM72,208a16,16,0,1,1,16-16A16,16,0,0,1,72,208Zm81-24H103a32,32,0,0,0-62,0H24V152H168v12.31A32.11,32.11,0,0,0,153,184Zm31,24a16,16,0,1,1,16-16A16,16,0,0,1,184,208Zm48-24H215a32.06,32.06,0,0,0-31-24V128h48Z"></path>
                                    </svg>
                                </div>
                                <div class="flex flex-col gap-1">
                                    <h2 class="text-[#1c140d] text-base font-bold leading-tight">Envíos a todo el Perú</h2>
                                    <p class="text-[#9e7347] text-sm font-normal leading-normal">Recibe tus productos en la comodidad de tu hogar</p>
                                </div>
                            </div>
                            <div class="flex flex-1 gap-3 rounded-lg border border-[#e9dbce] bg-[#fcfaf8] p-4 flex-col">
                                <div class="text-[#1c140d]">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                        <path d="M224,128a96,96,0,0,1-94.71,96H128A95.38,95.38,0,0,1,62.1,197.8a8,8,0,0,1,11-11.63A80,80,0,1,0,71.43,71.39a3.07,3.07,0,0,1-.26.25L44.59,96H72a8,8,0,0,1,0,16H24a8,8,0,0,1-8-8V56a8,8,0,0,1,16,0V85.8L60.25,60A96,96,0,0,1,224,128Z"></path>
                                    </svg>
                                </div>
                                <div class="flex flex-col gap-1">
                                    <h2 class="text-[#1c140d] text-base font-bold leading-tight">Devoluciones fáciles</h2>
                                    <p class="text-[#9e7347] text-sm font-normal leading-normal">Si no estás satisfecho, te devolvemos tu dinero</p>
                                </div>
                            </div>
                            <div class="flex flex-1 gap-3 rounded-lg border border-[#e9dbce] bg-[#fcfaf8] p-4 flex-col">
                                <div class="text-[#1c140d]">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                        <path d="M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"></path>
                                    </svg>
                                </div>
                                <div class="flex flex-col gap-1">
                                    <h2 class="text-[#1c140d] text-base font-bold leading-tight">Soporte al cliente</h2>
                                    <p class="text-[#9e7347] text-sm font-normal leading-normal">Estamos aquí para ayudarte en cada paso</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

</main>

<th:block layout:fragment="scripts">
    <script>
        (function () {
            const viewport = document.getElementById('destacadosViewport');
            const prevBtn = document.getElementById('destacadosPrev');
            const nextBtn = document.getElementById('destacadosNext');

            if (!viewport || !prevBtn || !nextBtn) return;

            const scrollByAmount = () => {
                const firstItem = viewport.querySelector('a');
                const itemWidth = firstItem ? firstItem.getBoundingClientRect().width : 180;
                return Math.max(200, itemWidth + 12);
            };

            prevBtn.addEventListener('click', () => {
                viewport.scrollBy({ left: -scrollByAmount(), behavior: 'smooth' });
            });
            nextBtn.addEventListener('click', () => {
                viewport.scrollBy({ left: scrollByAmount(), behavior: 'smooth' });
            });
        })();
    </script>
</th:block>

</body>
</html>
